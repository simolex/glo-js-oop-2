(()=>{"use strict";const t=new class{constructor(){this._rowList=localStorage.getItem("equipments")?JSON.parse(localStorage.getItem("equipments")):[],this._tableView=document.querySelector(".main__table tbody"),this._tableView.addEventListener("click",(t=>{if(t.target.closest(".table__row")){const e=t.target.closest(".table__row").id;t.target.closest(".table__button.remove")&&this._remove(e)}})),this._show()}append(t){this._rowList.push(t),localStorage.setItem("equipments",JSON.stringify(this._rowList)),this._show()}_remove(t){this._rowList.splice(t,1),localStorage.setItem("equipments",JSON.stringify(this._rowList)),this._show()}_show(){this._tableView.innerHTML="",this._rowList.forEach(((t,e)=>{const i=document.createElement("tr");i.classList.add("table__row"),i.id=e,i.innerHTML=`\n                <td class="table__cell">${t.nameEquip}</td>\n                <td class="table__cell">${t.brandEquip}</td>\n                <td class="table__cell">${t.modelEquip}</td>\n                <td class="table__cell">${t.numberEquip}</td>\n                <td class="table__cell">${t.dateEquip}</td>\n                <td class="table__cell">${t.unitTypeName}</td>\n                <th class="table__title">\n                  <div class="table__button remove">\n                    <img class="table__img" src="img/trash-can.svg" alt="" />\n                  </div>\n               </th>\n      `,this._tableView.append(i)}))}};class e{constructor({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l}){this.nameEquip=t,this.brandEquip=e,this.modelEquip=i,this.numberEquip=s,this.dateEquip=n,this.unitType=o,this.unitTypeName=l}}class i extends e{constructor({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l,pcMemory:d,pcCpu:r,pcHdd:u}){super({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l}),this.pcMemory=d,this.pcCpu=r,this.pcHdd=u}}class s extends e{constructor({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l,monitorSize:d,monitorResolution:r}){super({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l}),this.monitorSize=d,this.monitorResolution=r}}class n extends e{constructor({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l,printTechnology:d,mediaSize:r,printColor:u}){super({nameEquip:t,brandEquip:e,modelEquip:i,numberEquip:s,dateEquip:n,unitType:o,unitTypeName:l}),this.printTechnology=d,this.mediaSize=r,this.printColor=u}}const o={"type-computer":class{constructor(){this.pcMemory=document.getElementById("pc-memory"),this.pcCpu=document.getElementById("pc-cpu"),this.pcHdd=document.getElementById("pc-hdd")}show(){this.pcMemory.closest(".modal__control").style.display="",this.pcCpu.closest(".modal__control").style.display="",this.pcHdd.closest(".modal__control").style.display=""}hide(){this.pcMemory.closest(".modal__control").style.display="none",this.pcCpu.closest(".modal__control").style.display="none",this.pcHdd.closest(".modal__control").style.display="none"}getObject(t){return new i({...t,pcMemory:this.pcMemory.value,pcCpu:this.pcCpu.value,pcHdd:this.pcHdd.value})}},"type-monitor":class{constructor(){this.monitorSize=document.getElementById("monitor-size"),this.monitorResolution=document.getElementById("monitor-resolution")}show(){this.monitorSize.closest(".modal__control").style.display="",this.monitorResolution.closest(".modal__control").style.display=""}hide(){this.monitorSize.closest(".modal__control").style.display="none",this.monitorResolution.closest(".modal__control").style.display="none"}getObject(t){return new s({...t,monitorSize:this.monitorSize.value,monitorResolution:this.monitorResolution.value})}},"type-printer":class{constructor(){this.printTech=document.getElementById("print-tech"),this.printMedia=document.getElementById("print-media"),this.printColor=document.getElementById("print-color")}show(){this.printTech.closest(".modal__control").style.display="",this.printMedia.closest(".modal__control").style.display="",this.printColor.closest(".modal__control").style.display=""}hide(){this.printTech.closest(".modal__control").style.display="none",this.printMedia.closest(".modal__control").style.display="none",this.printColor.closest(".modal__control").style.display="none"}getObject(t){return new n({...t,printTechnology:this.printTech.value,mediaSize:this.printMedia.value,printColor:this.printColor.checked})}}};class l{constructor(){this.nameEquip=document.getElementById("unit-name"),this.brandEquip=document.getElementById("unit-brand"),this.modelEquip=document.getElementById("unit-model"),this.numberEquip=document.getElementById("unit-number"),this.dateEquip=document.getElementById("unit-date"),this.unitType=document.getElementById("unit-type"),this._secondForms={},this._formControl=document.getElementById("equipment-form"),this._showSecondForm(this.unitType.value),this.unitType.addEventListener("change",(t=>{t.target.value&&this._showSecondForm(t.target.value)}))}_showSecondForm(t){for(let t in this._secondForms)this._secondForms[t].hide();this._secondForms[t]||(this._secondForms[t]=new o[t]),this._secondForms[t].show()}init(e){this._formControl.addEventListener("submit",(i=>{i.preventDefault(),t.append(this.getObject()),e.hide()}))}getObject(){return this._secondForms[this.unitType.value].getObject({nameEquip:this.nameEquip.value,brandEquip:this.brandEquip.value,modelEquip:this.modelEquip.value,numberEquip:this.numberEquip.value,dateEquip:this.dateEquip.value,unitType:this.unitType.value,unitTypeName:this.unitType.options[this.unitType.selectedIndex].text+""})}}class d{constructor(){this.content=document.getElementById("modal-form"),this.buttonClose=this.content.querySelector(".modal-close"),this.form=new l,this.form.init(this),this.content.addEventListener("click",(t=>{!t.target.closest(".modal")&&t.target.classList.contains("overlay")&&this.hide()})),this.buttonClose.addEventListener("click",(()=>{this.hide()}))}show(){this.content.style.display="flex"}hide(){this.content.style.display=""}}(new class{constructor(){this.equipments={},this._nextId=1,this.addButton={}}get nextId(){return this._nextId++,this._nextId}set nextId(t){this._nextId=t}init(){this.nextId=1,this.addButton=document.getElementById("add-equipment"),this.addButton.addEventListener("click",(()=>{this.addEquipment()}))}_getModal(){return this.modal||(this.modal=new d),this.modal}addEquipment(){this._getModal().show()}}).init()})();